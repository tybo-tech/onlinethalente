<div class="max-w-3xl  py-10 px-4" *ngIf="variation && variation.data">
  <!-- Title & Actions -->
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold">
      {{ isEdit ? 'Edit Variation' : 'Add Variation' }}
    </h1>
    <div class="space-x-2">
      <button
        (click)="cancel()"
        class="px-4 py-2 rounded bg-gray-300 text-gray-800 hover:bg-gray-400"
      >
        Cancel
      </button>
      <button
        (click)="save()"
        [disabled]="loading"
        class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50"
      >
        {{ loading ? 'Saving...' : 'Save' }}
      </button>
    </div>
  </div>

  <!-- Variation Name -->
  <div class="mb-6">
    <label class="block text-sm font-medium text-gray-700 mb-1"
      >Variation Name</label
    >
    <input
      [(ngModel)]="variation.data.name"
      type="text"
      class="w-full border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
      placeholder="e.g. Size or Color"
    />
  </div>

  <!-- Variation Options -->
  <div class="mb-4">
    <div class="flex items-center justify-between mb-2">
      <h2 class="text-lg font-semibold">Options</h2>
      <button
        (click)="showAddInput = !showAddInput"
        class="text-sm text-blue-600 hover:underline"
      >
        {{ showAddInput ? 'Cancel' : '+ Add Option' }}
      </button>
    </div>

    <!-- Add Option Input -->
    <div *ngIf="showAddInput" class="flex items-center gap-2 mb-4">
      <input
        [(ngModel)]="newOption"
        type="text"
        class="flex-1 border px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="New option value"
        (keydown.enter)="addOption()"
      />
      <button
        (click)="addOption()"
        class="bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700"
      >
        Add
      </button>
    </div>

    <!-- Option Chips -->
    <div class="flex flex-wrap gap-2">
      <div
        *ngFor="let opt of variation.children; let i = index"
        class="bg-gray-100 text-gray-800 px-3 py-1 rounded-full flex items-center space-x-2"
      >
        <span  appContentEditable
    (contentUpdated)="contentChanged($event,opt)">{{ opt.data.value }}</span>
        <button 
          (click)="removeOption(i)"
          class="text-sm text-red-500 hover:text-red-700"
          title="Remove"
        >
          x
        </button>
      </div>
    </div>
  </div>
</div>
