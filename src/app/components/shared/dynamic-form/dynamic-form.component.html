<div class="bg-[var(--cloud)] text-[var(--text-main)] py-10 px-6 rounded shadow-md w-full max-w-2xl mx-auto">
  <h1 class="text-2xl font-bold mb-6 text-[var(--primary)]">
    {{ formTitle }}
  </h1>

  <form
    [formGroup]="form"
    (ngSubmit)="submit()"
    class="space-y-6 w-full"
  >
    <ng-container *ngFor="let input of inputs">
      <!-- Text Input -->
      <div
        *ngIf="[
          'text', 'email', 'password', 'number', 'tel', 'url', 'search'
        ].includes(input.type)"
      >
        <label class="block text-sm font-medium mb-1 text-[var(--text-main)]">
          {{ input.label }} <span *ngIf="input.required">*</span>
        </label>
        <input
          [placeholder]="input.placeholder || ''"
          [formControlName]="input.key"
          [type]="input.type"
          [readonly]="input.readonly || false"
          class="w-full bg-[var(--input-bg)] border border-[var(--input-border)] text-[var(--text-main)] rounded px-3 py-2 placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]"
        />
      </div>

      <!-- Select -->
      <div *ngIf="input.type === 'select'">
        <label class="block text-sm font-medium mb-1 text-[var(--text-main)]">
          {{ input.label }} <span *ngIf="input.required">*</span>
        </label>
        <select
          [formControlName]="input.key"
          class="w-full bg-[var(--input-bg)] border border-[var(--input-border)] text-[var(--text-main)] rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[var(--primary)]"
        >
          <option *ngFor="let opt of input.options" [value]="opt.value">
            {{ opt.label }}
          </option>
        </select>
      </div>

      <!-- Textarea -->
      <div *ngIf="input.type === 'textarea'">
        <label class="block text-sm font-medium mb-1 text-[var(--text-main)]">
          {{ input.label }} <span *ngIf="input.required">*</span>
        </label>
        <textarea
          [placeholder]="input.placeholder || ''"
          [formControlName]="input.key"
          rows="4"
          class="w-full bg-[var(--input-bg)] border border-[var(--input-border)] text-[var(--text-main)] rounded px-3 py-2 placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]"
        ></textarea>
      </div>

      <!-- Image Upload -->
      <div *ngIf="input.type === 'image'">
        <label class="block text-sm font-medium mb-1 text-[var(--text-main)]">
          {{ input.label }} <span *ngIf="input.required">*</span>
        </label>
        <app-upload-input
          [imageKey]="input.key"
          [formGroup]="form"
          [parentItem]="form.value"
          [formControlName]="input.key"
        ></app-upload-input>
      </div>


    </ng-container>

    <!-- Buttons -->
    <div class="flex flex-col sm:flex-row sm:justify-between gap-3 pt-4">
      <button
        *ngIf="cancelLabel"
        type="button"
        (click)="cancel()"
        class="px-4 py-2 rounded bg-[var(--gray)] text-[var(--text-main)] hover:bg-gray-300 transition"
      >
        {{ cancelLabel }}
      </button>
      <button
        type="submit"
        [disabled]="form.invalid"
        [ngClass]="submitClass"
        class="px-4 py-2 rounded bg-[var(--primary)] text-white hover:brightness-110 transition"
      >
        {{ submitLabel || "Save" }}
      </button>
    </div>

    <div
      *ngIf="redirect?.url && redirect?.label"
      class="mt-6 text-center"
    >
      <a
        [routerLink]="redirect.url"
        class="text-sm text-[var(--primary)] hover:underline"
      >
        {{ redirect.label }}
      </a>
    </div>
  </form>
</div>
