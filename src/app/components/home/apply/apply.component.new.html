<div class="min-h-screen bg-gray-50 py-8 px-4">
  <div class="max-w-2xl mx-auto">

    <!-- Application Header with Loan Info -->
    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
      <div class="text-center">
        <h1 class="text-2xl font-bold text-gray-900 mb-2">Loan Application</h1>
        <div *ngIf="currentApplication" class="text-lg text-blue-600 font-semibold">
          {{ formatCurrency(currentApplication.amount) }} loan
        </div>
      </div>

      <!-- Progress Bar -->
      <div class="mt-6">
        <div class="flex justify-between mb-2">
          <span class="text-sm font-medium text-gray-600">
            Step {{ currentStep }} of {{ stepTitles.length }}
          </span>
          <span class="text-sm font-medium text-gray-600">
            {{ getProgressPercentage() }}% Complete
          </span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div
            class="bg-blue-600 h-2 rounded-full transition-all duration-300"
            [style.width.%]="getProgressPercentage()">
          </div>
        </div>
      </div>

      <!-- Step Indicators -->
      <div class="flex justify-between mt-4">
        <div *ngFor="let title of stepTitles; let i = index"
             class="flex flex-col items-center">
          <div [class]="getStepClass(i + 1)"
               class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold mb-1">
            {{ i + 1 }}
          </div>
          <span class="text-xs text-gray-600 text-center max-w-16">{{ title }}</span>
        </div>
      </div>
    </div>

    <!-- Step Content -->
    <div class="bg-white rounded-lg shadow-sm p-8">

      <!-- Step 1: ID Verification -->
      <div *ngIf="currentStep === 1">
        <h2 class="text-xl font-semibold text-gray-900 mb-6 text-center">
          Let's verify your identity
        </h2>
        <div class="space-y-6">
          <div>
            <label for="idNumber" class="block text-sm font-medium text-gray-700 mb-2">
              South African ID Number <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              id="idNumber"
              [(ngModel)]="idNumber"
              maxlength="13"
              placeholder="Enter your 13-digit ID number"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg"
            />
            <p class="text-sm text-gray-500 mt-2">
              Your ID number is used for verification purposes only
            </p>
          </div>
        </div>
      </div>

      <!-- Step 2: Personal Details -->
      <div *ngIf="currentStep === 2">
        <h2 class="text-xl font-semibold text-gray-900 mb-6 text-center">
          Tell us about yourself
        </h2>
        <div class="space-y-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="firstName" class="block text-sm font-medium text-gray-700 mb-2">
                First Name <span class="text-red-500">*</span>
              </label>
              <input
                type="text"
                id="firstName"
                [(ngModel)]="firstName"
                placeholder="Enter your first name"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              />
            </div>
            <div>
              <label for="lastName" class="block text-sm font-medium text-gray-700 mb-2">
                Last Name <span class="text-red-500">*</span>
              </label>
              <input
                type="text"
                id="lastName"
                [(ngModel)]="lastName"
                placeholder="Enter your last name"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
              />
            </div>
          </div>

          <div>
            <label for="phoneNumber" class="block text-sm font-medium text-gray-700 mb-2">
              Mobile Number <span class="text-red-500">*</span>
            </label>
            <input
              type="tel"
              id="phoneNumber"
              [(ngModel)]="phoneNumber"
              placeholder="Enter your mobile number"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
          </div>

          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
              Email Address <span class="text-red-500">*</span>
            </label>
            <input
              type="email"
              id="email"
              [(ngModel)]="email"
              placeholder="Enter your email address"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
          </div>

          <div>
            <label for="maritalStatus" class="block text-sm font-medium text-gray-700 mb-2">
              Marital Status
            </label>
            <select
              id="maritalStatus"
              [(ngModel)]="maritalStatus"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="">Select your marital status</option>
              <option *ngFor="let option of maritalStatusOptions" [value]="option.value">
                {{ option.label }}
              </option>
            </select>
          </div>
        </div>
      </div>

      <!-- Step 3: Employment Information -->
      <div *ngIf="currentStep === 3">
        <h2 class="text-xl font-semibold text-gray-900 mb-6 text-center">
          Employment Details
        </h2>
        <div class="space-y-6">
          <div>
            <label for="employmentStatus" class="block text-sm font-medium text-gray-700 mb-2">
              Employment Status <span class="text-red-500">*</span>
            </label>
            <select
              id="employmentStatus"
              [(ngModel)]="employmentStatus"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
              <option *ngFor="let option of employmentStatusOptions" [value]="option.value">
                {{ option.label }}
              </option>
            </select>
          </div>

          <div>
            <label for="employerName" class="block text-sm font-medium text-gray-700 mb-2">
              Employer Name
            </label>
            <input
              type="text"
              id="employerName"
              [(ngModel)]="employerName"
              placeholder="Enter your employer name"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
          </div>

          <div>
            <label for="monthlyIncome" class="block text-sm font-medium text-gray-700 mb-2">
              Monthly Income <span class="text-red-500">*</span>
            </label>
            <input
              type="number"
              id="monthlyIncome"
              [(ngModel)]="monthlyIncome"
              placeholder="Enter your monthly income"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
            <p class="text-sm text-gray-500 mt-2">
              Enter your net monthly income (after tax)
            </p>
          </div>
        </div>
      </div>

      <!-- Step 4: Banking Details -->
      <div *ngIf="currentStep === 4">
        <h2 class="text-xl font-semibold text-gray-900 mb-6 text-center">
          Banking Information
        </h2>
        <div class="space-y-6">
          <div>
            <label for="bankName" class="block text-sm font-medium text-gray-700 mb-2">
              Bank Name <span class="text-red-500">*</span>
            </label>
            <select
              id="bankName"
              [(ngModel)]="bankName"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="">Select your bank</option>
              <option *ngFor="let option of bankOptions" [value]="option.value">
                {{ option.label }}
              </option>
            </select>
          </div>

          <div>
            <label for="accountType" class="block text-sm font-medium text-gray-700 mb-2">
              Account Type <span class="text-red-500">*</span>
            </label>
            <select
              id="accountType"
              [(ngModel)]="accountType"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
              <option *ngFor="let option of accountTypeOptions" [value]="option.value">
                {{ option.label }}
              </option>
            </select>
          </div>

          <div>
            <label for="accountNumber" class="block text-sm font-medium text-gray-700 mb-2">
              Account Number <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              id="accountNumber"
              [(ngModel)]="accountNumber"
              placeholder="Enter your account number"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
          </div>

          <div>
            <label for="branchCode" class="block text-sm font-medium text-gray-700 mb-2">
              Branch Code <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              id="branchCode"
              [(ngModel)]="branchCode"
              placeholder="Enter branch code"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
        </div>
      </div>

      <!-- Step 5: Review & Submit -->
      <div *ngIf="currentStep === 5">
        <h2 class="text-xl font-semibold text-gray-900 mb-6 text-center">
          Review Your Application
        </h2>
        <div class="space-y-6">
          <!-- Loan Summary -->
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <h3 class="font-semibold text-blue-900 mb-2">Loan Details</h3>
            <div *ngIf="currentApplication" class="text-blue-800">
              <p><strong>Amount:</strong> {{ formatCurrency(currentApplication.amount) }}</p>
              <p><strong>Repayment Period:</strong> {{ currentApplication.type }} months</p>
            </div>
          </div>

          <!-- Personal Info Summary -->
          <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
            <h3 class="font-semibold text-gray-900 mb-2">Personal Information</h3>
            <div class="text-gray-700 space-y-1">
              <p><strong>Name:</strong> {{ firstName }} {{ lastName }}</p>
              <p><strong>ID Number:</strong> {{ idNumber }}</p>
              <p><strong>Phone:</strong> {{ phoneNumber }}</p>
              <p><strong>Email:</strong> {{ email }}</p>
            </div>
          </div>

          <!-- Employment Summary -->
          <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
            <h3 class="font-semibold text-gray-900 mb-2">Employment</h3>
            <div class="text-gray-700 space-y-1">
              <p><strong>Status:</strong> {{ employmentStatus }}</p>
              <p><strong>Employer:</strong> {{ employerName }}</p>
              <p><strong>Monthly Income:</strong> {{ formatCurrency(monthlyIncome) }}</p>
            </div>
          </div>

          <!-- Banking Summary -->
          <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
            <h3 class="font-semibold text-gray-900 mb-2">Banking Details</h3>
            <div class="text-gray-700 space-y-1">
              <p><strong>Bank:</strong> {{ bankName }}</p>
              <p><strong>Account Type:</strong> {{ accountType }}</p>
              <p><strong>Account Number:</strong> {{ accountNumber }}</p>
              <p><strong>Branch Code:</strong> {{ branchCode }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation Buttons -->
      <div class="flex justify-between items-center pt-8 mt-8 border-t border-gray-200">
        <button
          *ngIf="currentStep > 1"
          (click)="previousStep()"
          class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
        >
          ← Previous
        </button>
        <div *ngIf="currentStep === 1"></div>

        <div class="flex space-x-4">
          <button
            *ngIf="currentStep < stepTitles.length"
            (click)="nextStep()"
            [disabled]="!isCurrentStepValid()"
            [class.opacity-50]="!isCurrentStepValid()"
            [class.cursor-not-allowed]="!isCurrentStepValid()"
            class="px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold"
          >
            Next →
          </button>

          <button
            *ngIf="currentStep === stepTitles.length"
            (click)="submitApplication()"
            [disabled]="!isCurrentStepValid() || loading"
            [class.opacity-50]="!isCurrentStepValid() || loading"
            class="px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold"
          >
            <span *ngIf="!loading">Submit Application</span>
            <span *ngIf="loading">Submitting...</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
